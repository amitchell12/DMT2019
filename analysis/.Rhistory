install.packages("Rmisc")
install.packages("Rmisc")
library(ggplot2)
library(Rmisc)
subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13$SUB <- 801-1
subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14$SUB <- 801-2
subject801_pointingTask_CLfix_right_2019.07.26T14_37_16$SUB <- 801-3
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43$SUB <- 802-1
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37$SUB <- 802-2
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30$SUB <- 802-3
CLB <- rbind(subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13,
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43)
CLN <- rbind(subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14,
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37)
CLF <- rbind(subject801_pointingTask_CLfix_right_2019.07.26T14_37_16,
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30)
B <- CLB[c(5,6,14,15,19)]
N <- CLN[c(4,5,13,14,19)]
F <- CLF[c(7,8,14,15,20)]
names(B)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(N)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(F)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
BNF <- rbind(B, N, F)
BNF$PAT <- "MCI"
BNF[BNF$SUB > 801-3, "PAT"] <- "AD"
BNF$COND <- "CLB"
BNF[BNF$SUB %in% c(801-2,803-2), "COND"] <- "CLN"
BNF[BNF$SUB %in% c(801-3,802-3), "COND"] <- "CLF"
BNF$targ <- factor(BNF$tX)
ggplot(BNF)+ geom_point(aes(x=rX, y=rY, colour=targ), size=3) +
geom_point(aes(x=tX, y = tY, colour=targ), shape=4, size=3, alpha=1) +
lims(x=c(0, 800)) +
facet_grid(COND~PAT) +
theme_bw() -> BNFplot
png("BNF.png", res=300, units="in", width = 12, height =9)
BNFplot
dev.off()
setwd('M:\Alex_Files\Experiments\DMT2019\DMT2019_rawData\patients')
setwd('M:\Alex_Files\Experiments\DMT2019\DMT2019_rawData\patients')
dataPath = '\\chss.datastore.ed.ac.uk\chss\ppls\users\amitch17\Alex_Files\Experiments\DMT2019\DMT2019_rawData\patients'
setwd(dataPath)
dataPath = '/amitch17/Alex_Files/Experiments/DMT2019/DMT2019_rawData/patients'
setwd(dataPath)
ls()
getwd
dataPath = "/Alex_Files/Experiments/DMT2019/DMT2019_rawData/patients"
setwd(dataPath)
library(ggplot2)
library(Rmisc)
dataPath = "/Alex_Files/Experiments/DMT2019/DMT2019_rawData/patients"
setwd(dataPath)
subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13$SUB <- 801-1
subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14$SUB <- 801-2
subject801_pointingTask_CLfix_right_2019.07.26T14_37_16$SUB <- 801-3
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43$SUB <- 802-1
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37$SUB <- 802-2
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30$SUB <- 802-3
CLB <- rbind(subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13,
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43)
CLN <- rbind(subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14,
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37)
CLF <- rbind(subject801_pointingTask_CLfix_right_2019.07.26T14_37_16,
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30)
B <- CLB[c(5,6,14,15,19)]
N <- CLN[c(4,5,13,14,19)]
F <- CLF[c(7,8,14,15,20)]
names(B)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(N)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(F)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
BNF <- rbind(B, N, F)
BNF$PAT <- "MCI"
BNF[BNF$SUB > 801-3, "PAT"] <- "AD"
BNF$COND <- "CLB"
BNF[BNF$SUB %in% c(801-2,803-2), "COND"] <- "CLN"
BNF[BNF$SUB %in% c(801-3,802-3), "COND"] <- "CLF"
BNF$targ <- factor(BNF$tX)
ggplot(BNF)+ geom_point(aes(x=rX, y=rY, colour=targ), size=3) +
geom_point(aes(x=tX, y = tY, colour=targ), shape=4, size=3, alpha=1) +
lims(x=c(0, 800)) +
facet_grid(COND~PAT) +
theme_bw() -> BNFplot
png("BNF.png", res=300, units="in", width = 12, height =9)
BNFplot
dev.off()
library(ggplot2)
library(Rmisc)
#dataPath = "/Alex_Files/Experiments/DMT2019/DMT2019_rawData/patients"
#setwd(dataPath)
subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13$SUB <- 801-1
subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14$SUB <- 801-2
subject801_pointingTask_CLfix_right_2019.07.26T14_37_16$SUB <- 801-3
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43$SUB <- 802-1
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37$SUB <- 802-2
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30$SUB <- 802-3
CLB <- rbind(subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13,
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43)
CLN <- rbind(subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14,
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37)
CLF <- rbind(subject801_pointingTask_CLfix_right_2019.07.26T14_37_16,
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30)
B <- CLB[c(5,6,14,15,19)]
N <- CLN[c(4,5,13,14,19)]
F <- CLF[c(7,8,14,15,20)]
names(B)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(N)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
names(F)[1:5] <- c("rX", "rY","tX", "tY", "SUB")
BNF <- rbind(B, N, F)
BNF$PAT <- "MCI"
BNF[BNF$SUB > 801-3, "PAT"] <- "AD"
BNF$COND <- "CLB"
BNF[BNF$SUB %in% c(801-2,803-2), "COND"] <- "CLN"
BNF[BNF$SUB %in% c(801-3,802-3), "COND"] <- "CLF"
BNF$targ <- factor(BNF$tX)
ggplot(BNF)+ geom_point(aes(x=rX, y=rY, colour=targ), size=3) +
geom_point(aes(x=tX, y = tY, colour=targ), shape=4, size=3, alpha=1) +
lims(x=c(0, 800)) +
facet_grid(COND~PAT) +
theme_bw() -> BNFplot
png("BNF.png", res=300, units="in", width = 12, height =9)
BNFplot
dev.off()
library(ggplot2)
library(Rmisc)
#dataPath = "/Alex_Files/Experiments/DMT2019/DMT2019_rawData/patients"
#setwd(dataPath)
subject801_pointingTask_CLbeep_right_2019.07.26T14_26_13$SUB <- 801-1
subject801_pointingTask_CLnorm_right_2019.07.26T14_32_14$SUB <- 801-2
subject801_pointingTask_CLfix_right_2019.07.26T14_37_16$SUB <- 801-3
subject802_pointingTask_CLbeep_right_2019.07.26T14_49_43$SUB <- 802-1
subject802_pointingTask_CLnorm_right_2019.07.26T14_57_37$SUB <- 802-2
subject802_pointingTask_CLfix_right_2019.07.26T15_01_30$SUB <- 802-3
library(readr)
library(ggplot2)
library(Rmisc)
#THE RAW DATA FILES SHOULD BE IN SUBDIRECTORY PA_XPT1_data/
#MANUALLY SET WORKING DIRECTORY TO DATA DIRECTORY AND LIST *.DAT CONTENTS
mypath <- getwd()
#make complete list of eyelink RESULTS files (trial information)
resfiles=list.files(path=mypath, full.names=TRUE, recursive = FALSE, include.dirs = TRUE, pattern = "*.csv")
#make empty dataframe to stack up trial information
CLF <- read.csv(text = "avg_rt,count_committed,count_valid_trial,datetime,eye_move,fix_x,land_x,land_y,reach_duration,response_time_target_mouse_response,sanity_check,subject_nr,subject_parity,targ_x,targ_y,target_onset,targets_file,time_touch_offset,touch_x")
#stack them all up
for(x in resfiles){
tmp <- read.csv(x)
tmp$subject_nr <- as.numeric(substr(x, 44, 46))
CLF <- rbind(CLF, tmp)
}
CLF <- CLF[CLF$targ_x > 0, c(5,7,8,12,14,15)]
CLF$GRP <- "HC"
CLF[CLF$subject_nr %in% c(801,804), "GRP"] <- "MCI"
CLF[CLF$subject_nr %in% c(802,803), "GRP"] <- "AD"
CLF$SUB <- factor(CLF$subject_nr)
CLF$x_Err <- CLF$land_x-CLF$targ_x
CLF$y_Err <- CLF$land_y-CLF$targ_y
CLF[is.na(CLF$eye_move), "eye_move"] <- 0
CLF$ECC <- factor(cut(CLF$targ_x, 3, label=c("N", "M", "F")))
CLF <- CLF[CLF$eye_move == 0, ]
CLF$ABS_ERR <- sqrt(CLF$x_Err^2 + CLF$y_Err^2)
ggplot(CLF, aes(x=SUB, y=ABS_ERR, colour=ECC)) +
geom_boxplot(outlier.alpha=0) +
geom_jitter(position=position_dodge(width=.8), size=4, alpha=.5) +
ylim(0,300) + geom_hline(yintercept=55, linetype="dotted")+
theme_bw() +
mean_AE <- summarySE(data=CLF, measurevar = "ABS_ERR", groupvars = c("SUB", "GRP"))
ggplot(mean_AE, aes(x = SUB, y=ABS_ERR, colour=GRP)) + geom_point(size=5, alpha=.5) +
geom_errorbar(aes(ymin=ABS_ERR-ci, ymax=ABS_ERR+ci)) + ylim(c(50,175))-> ALL
grid.arrange(ALL, NOTNEAR, ncol=2)
mean_CE <- summarySE(data=CLF, measurevar = "x_Err", groupvars = c("SUB", "GRP"))
ggplot(mean_CE, aes(x = SUB, y=x_Err, colour=GRP)) + geom_point(size=5, alpha=.5) +
geom_errorbar(aes(ymin=x_Err-ci, ymax=x_Err+ci))
lm_fits <- read.csv(text="SUB,rsq,a,b")
row=1
for(SUB in levels(CLF$SUB)){
tmp <- CLF[CLF$SUB==SUB, ]
model <- lm(ABS_ERR~ECC, data=tmp)
lm_fits[row, 1] <- SUB
lm_fits[row, 3:4] <- coefficients(model)[1:2]
lm_fits[row, 2] <- summary(model)$r.squared
row=row+1
}
#summary statistics
#all eccentricities
med <- aggregate(ABS_ERR~SUB*ECC, median, data=CLF) #median of eccentricity
mean_med <- aggregate(ABS_ERR~SUB, mean, data=med) #mean of all
ggplot(mean_med, aes(x=SUB, y=ABS_ERR))+ geom_point(size=5)
#far targets only
med_far <- aggregate(ABS_ERR~SUB*ECC, median, data=CLF[CLF$targ_x > 300, ]) #median of eccentricity
mean_med_far <- aggregate(ABS_ERR~SUB, mean, data=med) #mean of all
ggplot(mean_med_far, aes(x=SUB, y=ABS_ERR))+ geom_point(size=5)
View(CLF)
#THE RAW DATA FILES SHOULD BE IN SUBDIRECTORY PA_XPT1_data/
#MANUALLY SET WORKING DIRECTORY TO DATA DIRECTORY AND LIST *.DAT CONTENTS
mypath <- getwd()
mypath
library(readr)
library(ggplot2)
library(Rmisc)
#MANUALLY SET WORKING DIRECTORY TO DATA DIRECTORY AND LIST *.DAT CONTENTS
mypath <- getwd()
#make complete list of eyelink RESULTS files (trial information)
resfiles=list.files(path=mypath, full.names=TRUE, recursive = FALSE, include.dirs = TRUE, pattern = "*.csv")
#make empty dataframe to stack up trial information
CLF <- read.csv(text = "avg_rt,count_committed,count_valid_trial,datetime,eye_move,fix_x,land_x,land_y,reach_duration,response_time_target_mouse_response,sanity_check,subject_nr,subject_parity,targ_x,targ_y,target_onset,targets_file,time_touch_offset,touch_x")
#stack them all up
for(x in resfiles){
tmp <- read.csv(x)
tmp$subject_nr <- as.numeric(substr(x, 44, 46))
CLF <- rbind(CLF, tmp)
}
CLF <- CLF[CLF$targ_x > 0, c(5,7,8,12,14,15)]
CLF$GRP <- "HC"
CLF[CLF$subject_nr %in% c(801,804), "GRP"] <- "MCI"
CLF[CLF$subject_nr %in% c(802,803), "GRP"] <- "AD"
CLF$SUB <- factor(CLF$subject_nr)
CLF$x_Err <- CLF$land_x-CLF$targ_x
CLF$y_Err <- CLF$land_y-CLF$targ_y
CLF[is.na(CLF$eye_move), "eye_move"] <- 0
CLF$ECC <- factor(cut(CLF$targ_x, 3, label=c("N", "M", "F")))
CLF <- CLF[CLF$eye_move == 0, ]
CLF$ABS_ERR <- sqrt(CLF$x_Err^2 + CLF$y_Err^2)
ggplot(CLF, aes(x=SUB, y=ABS_ERR, colour=ECC)) +
geom_boxplot(outlier.alpha=0) +
geom_jitter(position=position_dodge(width=.8), size=4, alpha=.5) +
ylim(0,300) + geom_hline(yintercept=55, linetype="dotted")+
theme_bw() +
mean_AE <- summarySE(data=CLF, measurevar = "ABS_ERR", groupvars = c("SUB", "GRP"))
ggplot(mean_AE, aes(x = SUB, y=ABS_ERR, colour=GRP)) + geom_point(size=5, alpha=.5) +
geom_errorbar(aes(ymin=ABS_ERR-ci, ymax=ABS_ERR+ci)) + ylim(c(50,175))-> ALL
grid.arrange(ALL, NOTNEAR, ncol=2)
mean_CE <- summarySE(data=CLF, measurevar = "x_Err", groupvars = c("SUB", "GRP"))
ggplot(mean_CE, aes(x = SUB, y=x_Err, colour=GRP)) + geom_point(size=5, alpha=.5) +
geom_errorbar(aes(ymin=x_Err-ci, ymax=x_Err+ci))
lm_fits <- read.csv(text="SUB,rsq,a,b")
row=1
for(SUB in levels(CLF$SUB)){
tmp <- CLF[CLF$SUB==SUB, ]
model <- lm(ABS_ERR~ECC, data=tmp)
lm_fits[row, 1] <- SUB
lm_fits[row, 3:4] <- coefficients(model)[1:2]
lm_fits[row, 2] <- summary(model)$r.squared
row=row+1
}
#summary statistics
#all eccentricities
med <- aggregate(ABS_ERR~SUB*ECC, median, data=CLF) #median of eccentricity
mean_med <- aggregate(ABS_ERR~SUB, mean, data=med) #mean of all
ggplot(mean_med, aes(x=SUB, y=ABS_ERR))+ geom_point(size=5)
#far targets only
med_far <- aggregate(ABS_ERR~SUB*ECC, median, data=CLF[CLF$targ_x > 300, ]) #median of eccentricity
mean_med_far <- aggregate(ABS_ERR~SUB, mean, data=med) #mean of all
ggplot(mean_med_far, aes(x=SUB, y=ABS_ERR))+ geom_point(size=5)
mypath
#MANUALLY SET WORKING DIRECTORY TO DATA DIRECTORY AND LIST *.DAT CONTENTS
mypath <- getwd()
mypath
